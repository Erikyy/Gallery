generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String    @id @unique @default(uuid())
  username  String
  role      Role      @default(USER)
  bio       String
  email     String
  firstName String
  lastName  String
  photos    Photo[]
  Comment   Comment[]
}

model Photo {
  id      String    @id @unique @default(uuid())
  name    String
  url     String
  user    User?     @relation(fields: [userId], references: [id])
  userId  String?
  comment Comment[]
}

model Comment {
  id        String    @id @unique @default(uuid())
  content   String
  user      User?     @relation(fields: [userId], references: [id])
  userId    String?
  photo     Photo     @relation(fields: [photoId], references: [id])
  photoId   String
  reply     Comment   @relation("CommentToComment", fields: [commentId], references: [id])
  commentId String
  Comment   Comment[] @relation("CommentToComment")
}

enum Role {
  USER
  ADMIN
}
